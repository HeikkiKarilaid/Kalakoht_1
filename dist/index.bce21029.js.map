{"mappings":"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","sources":["<anon>","scripts/script.js"],"sourcesContent":["var $parcel$global =\ntypeof globalThis !== 'undefined'\n  ? globalThis\n  : typeof self !== 'undefined'\n  ? self\n  : typeof window !== 'undefined'\n  ? window\n  : typeof global !== 'undefined'\n  ? global\n  : {};\nvar $parcel$modules = {};\nvar $parcel$inits = {};\n\nvar parcelRequire = $parcel$global[\"parcelRequire7782\"];\nif (parcelRequire == null) {\n  parcelRequire = function(id) {\n    if (id in $parcel$modules) {\n      return $parcel$modules[id].exports;\n    }\n    if (id in $parcel$inits) {\n      var init = $parcel$inits[id];\n      delete $parcel$inits[id];\n      var module = {id: id, exports: {}};\n      $parcel$modules[id] = module;\n      init.call(module.exports, module, module.exports);\n      return module.exports;\n    }\n    var err = new Error(\"Cannot find module '\" + id + \"'\");\n    err.code = 'MODULE_NOT_FOUND';\n    throw err;\n  };\n\n  parcelRequire.register = function register(id, init) {\n    $parcel$inits[id] = init;\n  };\n\n  $parcel$global[\"parcelRequire7782\"] = parcelRequire;\n}\n\nvar $6AR8M = parcelRequire(\"6AR8M\");\n\nvar $8c1ok = parcelRequire(\"8c1ok\");\n\nvar $gdelx = parcelRequire(\"gdelx\");\n\nvar $GAZSx = parcelRequire(\"GAZSx\");\n// const databaseURL =\n//   'https://kalakoht-d1ba4-default-rtdb.europe-west1.firebasedatabase.app/';\nconst $93d4580a48e37f73$var$database = (0, $gdelx.getDatabase)((0, $8c1ok.app));\nconst $93d4580a48e37f73$var$username = document.getElementById(\"username\");\nconst $93d4580a48e37f73$var$email = document.getElementById(\"email\");\nconst $93d4580a48e37f73$var$create = document.querySelector(\".button-create\");\nconst $93d4580a48e37f73$var$login = document.querySelector(\".button-login\");\nconst $93d4580a48e37f73$var$password = document.getElementById(\"password\");\nconst $93d4580a48e37f73$var$auth = (0, $6AR8M.getAuth)();\nconst $93d4580a48e37f73$var$loginError = document.getElementById(\"login-error-msg\");\n//! Create user\n$93d4580a48e37f73$var$create.addEventListener(\"click\", (e)=>{\n    e.preventDefault();\n    const name = $93d4580a48e37f73$var$username.value;\n    const pass = $93d4580a48e37f73$var$password.value;\n    const mail = $93d4580a48e37f73$var$email.value;\n    if (name === \"\") $93d4580a48e37f73$var$loginError.textContent = \"Username required!\";\n    else (0, $6AR8M.createUserWithEmailAndPassword)($93d4580a48e37f73$var$auth, mail, pass).then((userCredential)=>{\n        // User created\n        const userId = userCredential.user.uid;\n        //Add user to database\n        (0, $gdelx.set)((0, $gdelx.ref)($93d4580a48e37f73$var$database, \"users/\" + userId), {\n            coordinates: (0, $GAZSx.getLocation),\n            username: name,\n            email: mail\n        }).then(()=>{\n            console.log(\"Data saved successfully!\");\n            return $93d4580a48e37f73$var$addData(userId);\n        //window.location.assign('mainPage.html');\n        }).catch((error)=>{\n            console.error(\"Error saving data:\", error);\n        });\n    // ...\n    }).catch((error)=>{\n        const errorCode = error.code;\n        console.log(errorCode);\n        const errorMessage = error.message;\n        $93d4580a48e37f73$var$loginError.style.opacity = 1;\n        $93d4580a48e37f73$var$loginError.textContent = errorMessage;\n        console.log(errorMessage);\n    // ..\n    });\n});\n//! Sign-in user\n$93d4580a48e37f73$var$login.addEventListener(\"click\", function(e) {\n    e.preventDefault();\n    const pass = $93d4580a48e37f73$var$password.value;\n    const mail = $93d4580a48e37f73$var$email.value;\n    (0, $6AR8M.signInWithEmailAndPassword)($93d4580a48e37f73$var$auth, mail, pass).then((userCredential)=>{\n        // Signed in\n        const userId = userCredential.user.uid;\n        //console.log(userId);\n        return $93d4580a48e37f73$var$addData(userId);\n    }).catch((error)=>{\n        const errorCode = error.code;\n        console.log(errorCode);\n        const errorMessage = error.message;\n        $93d4580a48e37f73$var$loginError.style.opacity = 1;\n        $93d4580a48e37f73$var$loginError.textContent = errorMessage;\n        console.log(errorMessage);\n    // ..\n    });\n});\n//! Add data to user\nconst $93d4580a48e37f73$var$addData = function(userId) {\n    (0, $gdelx.update)((0, $gdelx.ref)($93d4580a48e37f73$var$database, \"users/\" + userId), {\n        last_login: $93d4580a48e37f73$var$dateFormatted(),\n        coordinates: (0, $GAZSx.getLocation)\n    }).then(()=>{\n        console.log(\"Signed in\");\n        window.location.assign(\"mainPage.html\");\n        return userId;\n    }).catch((error)=>{\n        console.error(\"Error saving data:\", error);\n    });\n};\n//date\nfunction $93d4580a48e37f73$var$dateFormatted() {\n    const now = new Date();\n    const day = now.getDate();\n    const month = now.getMonth() + 1;\n    const year = now.getFullYear();\n    const hour = now.getHours();\n    const minutes = now.getMinutes();\n    return $93d4580a48e37f73$var$dateFormatted = `${day}/${month}/${year}, ${hour}:${minutes}`;\n}\n\n\n//# sourceMappingURL=index.bce21029.js.map\n","import {\r\n  getAuth,\r\n  createUserWithEmailAndPassword,\r\n  signInWithEmailAndPassword,\r\n} from 'firebase/auth';\r\nimport { app } from './firebaseConfig.js';\r\nimport { getDatabase, ref, set, update } from 'firebase/database';\r\nimport { getLocation } from './getLocation.js';\r\n// const databaseURL =\r\n//   'https://kalakoht-d1ba4-default-rtdb.europe-west1.firebasedatabase.app/';\r\n\r\nconst database = getDatabase(app);\r\nconst username = document.getElementById('username');\r\nconst email = document.getElementById('email');\r\nconst create = document.querySelector('.button-create');\r\nconst login = document.querySelector('.button-login');\r\nconst password = document.getElementById('password');\r\nconst auth = getAuth();\r\nconst loginError = document.getElementById('login-error-msg');\r\n\r\n//! Create user\r\ncreate.addEventListener('click', e => {\r\n  e.preventDefault();\r\n  const name = username.value;\r\n  const pass = password.value;\r\n  const mail = email.value;\r\n  if (name === '') {\r\n    loginError.textContent = 'Username required!';\r\n  } else {\r\n    createUserWithEmailAndPassword(auth, mail, pass)\r\n      .then(userCredential => {\r\n        // User created\r\n\r\n        const userId = userCredential.user.uid;\r\n\r\n        //Add user to database\r\n\r\n        set(ref(database, 'users/' + userId), {\r\n          coordinates: getLocation,\r\n          username: name,\r\n          email: mail,\r\n        })\r\n          .then(() => {\r\n            console.log('Data saved successfully!');\r\n            return addData(userId);\r\n            //window.location.assign('mainPage.html');\r\n          })\r\n          .catch(error => {\r\n            console.error('Error saving data:', error);\r\n          });\r\n\r\n        // ...\r\n      })\r\n      .catch(error => {\r\n        const errorCode = error.code;\r\n\r\n        console.log(errorCode);\r\n        const errorMessage = error.message;\r\n        loginError.style.opacity = 1;\r\n        loginError.textContent = errorMessage;\r\n        console.log(errorMessage);\r\n        // ..\r\n      });\r\n  }\r\n});\r\n\r\n//! Sign-in user\r\nlogin.addEventListener('click', function (e) {\r\n  e.preventDefault();\r\n  const pass = password.value;\r\n  const mail = email.value;\r\n\r\n  signInWithEmailAndPassword(auth, mail, pass)\r\n    .then(userCredential => {\r\n      // Signed in\r\n      const userId = userCredential.user.uid;\r\n\r\n      //console.log(userId);\r\n      return addData(userId);\r\n    })\r\n    .catch(error => {\r\n      const errorCode = error.code;\r\n\r\n      console.log(errorCode);\r\n      const errorMessage = error.message;\r\n      loginError.style.opacity = 1;\r\n      loginError.textContent = errorMessage;\r\n      console.log(errorMessage);\r\n      // ..\r\n    });\r\n});\r\n\r\n//! Add data to user\r\nconst addData = function (userId) {\r\n  update(ref(database, 'users/' + userId), {\r\n    last_login: dateFormatted(),\r\n    coordinates: getLocation,\r\n  })\r\n    .then(() => {\r\n      console.log('Signed in');\r\n\r\n      window.location.assign('mainPage.html');\r\n      return userId;\r\n    })\r\n    .catch(error => {\r\n      console.error('Error saving data:', error);\r\n    });\r\n};\r\n\r\n//date\r\nfunction dateFormatted() {\r\n  const now = new Date();\r\n  const day = now.getDate();\r\n  const month = now.getMonth() + 1;\r\n  const year = now.getFullYear();\r\n  const hour = now.getHours();\r\n  const minutes = now.getMinutes();\r\n  return (dateFormatted = `${day}/${month}/${year}, ${hour}:${minutes}`);\r\n}\r\n"],"names":["$parcel$global","globalThis","self","window","global","$parcel$modules","$parcel$inits","parcelRequire","id","exports","init","module","call","err","Error","code","register","$6AR8M","$8c1ok","$gdelx","$GAZSx","$93d4580a48e37f73$var$database","getDatabase","app","$93d4580a48e37f73$var$username","document","getElementById","$93d4580a48e37f73$var$email","$93d4580a48e37f73$var$create","querySelector","$93d4580a48e37f73$var$login","$93d4580a48e37f73$var$password","$93d4580a48e37f73$var$auth","getAuth","$93d4580a48e37f73$var$loginError","addEventListener","e","preventDefault","name","value","pass","mail","textContent","createUserWithEmailAndPassword","then","userCredential","userId","user","uid","set","ref","coordinates","getLocation","username","email","console","log","$93d4580a48e37f73$var$addData","catch","error","errorCode","errorMessage","message","style","opacity","signInWithEmailAndPassword","update","last_login","$93d4580a48e37f73$var$dateFormatted","location","assign","now","Date","day","getDate","month","getMonth","year","getFullYear","hour","getHours","minutes","getMinutes"],"version":3,"file":"index.bce21029.js.map"}